# 文件压缩与解压工具

一个强大的 Dify 插件，提供全面的**本地**文件压缩和解压功能。所有压缩和解压操作完全在您的本地机器上执行，无需任何外部服务、API 密钥或互联网连接，确保最大的数据安全性和隐私保护。支持 .zip、.7z 和 tar.gz 格式，并提供可选的 AES-256 密码加密以实现安全的文件归档。

## 版本信息

- **当前版本**: v0.0.1
- **发布日期**: 2026-01-18
- **兼容性**: Dify 插件框架
- **Python 版本**: 3.12

### 版本历史
- **v0.0.1** (2026-01-18): 初始版本，包含压缩和解压功能

## 快速开始

1. 从 Dify 应用市场下载 file_archive_kit 插件
2. 在您的 Dify 环境中安装插件
3. 立即开始压缩和解压您的文件

## 核心特性

- **100% 本地处理**: 所有压缩和解压操作完全在您的本地机器上执行
- **无需外部服务**: 无需连接任何外部服务或第三方 API
- **无需 API 密钥**: 完全免费使用，无需任何 API 密钥配置
- **最高数据安全**: 您的文件永远不会离开您的本地环境，确保完全的隐私和安全
- **零网络依赖**: 无需互联网连接即可离线工作
- **文件类型识别**: 自动识别并保留 100+ 种文件格式的 MIME 类型
- **强加密**: 使用 AES-256 加密进行密码保护的归档
- **自动密码生成**: 为加密自动生成强随机密码
<img width="738" height="950" alt="Chinese" src="https://github.com/user-attachments/assets/09efbe55-6102-424d-abbb-bc6bb0f32173" />
<img width="747" height="1050" alt="English" src="https://github.com/user-attachments/assets/2d4c9de1-9311-4a49-aa17-137943e7c71f" />

## 核心功能

### 普通压缩

#### 压缩文件 (compress_normal)
将多个文件压缩为单个归档文件，无需密码保护。
- **支持格式**: .zip, .7z, tar.gz
- **功能特性**:
  - .zip 文件使用 LZMA 压缩
  - .7z 和 tar.gz 使用标准压缩
  - 批量文件压缩
  - 自定义归档命名
  - 自动 MIME 类型保留

#### 解压文件 (decompress_normal)
从归档文件中提取文件，无需密码保护。
- **支持格式**: .zip, .7z, tar.gz
- **功能特性**:
  - 自动文件类型识别（100+ 种格式）
  - 批量文件提取
  - 保留原始文件结构
  - 为提取的文件保留 MIME 类型
  - 处理嵌套目录

### 加密压缩

#### 带密码压缩 (compress_encrypt)
使用 AES-256 加密将多个文件压缩为密码保护的归档文件。
- **支持格式**: .zip (AES-256), .7z (AES-256)
- **功能特性**:
  - .zip 文件使用 AES-256 加密
  - .7z 文件使用 AES-256 加密
  - 自定义密码输入
  - .zip 文件使用 LZMA 压缩
  - 安全的密码处理
  - 批量文件压缩

#### 带密码解压 (decompress_encrypt)
使用 AES-256 解密从密码保护的归档文件中提取文件。
- **支持格式**: .zip (AES-256), .7z (AES-256)
- **功能特性**:
  - .zip 文件使用 AES-256 解密
  - .7z 文件使用 AES-256 解密
  - 密码验证
  - 自动文件类型识别（100+ 种格式）
  - 批量文件提取
  - 错误密码的错误处理

### 自动密码加密

#### 自动密码压缩 (compress_encrypt_auto)
使用自动生成的强密码将多个文件压缩为密码保护的归档文件。
- **支持格式**: .zip (AES-256), .7z (AES-256)
- **功能特性**:
  - .zip 文件使用 AES-256 加密
  - .7z 文件使用 AES-256 加密
  - 自动生成 16 位强密码
  - 密码包含字母、数字和特殊字符
  - 在输出中突出显示密码
  - 密码包含在 JSON 响应中
  - .zip 文件使用 LZMA 压缩
  - 批量文件压缩

## 技术优势

- **本地处理**: 所有压缩和解压都在本地执行，无需外部依赖
- **高压缩率**: 使用 LZMA 压缩实现最佳文件大小缩减
- **强加密**: 使用 AES-256 加密实现最大安全性
- **文件类型识别**: 自动检测 100+ 种文件格式的 MIME 类型
- **灵活选项**: 为不同用例提供各种配置选项
- **错误处理**: 强大的错误处理和信息丰富的消息
- **安全处理**: 文件安全处理，不保留数据
- **自动密码生成**: 密码学安全的随机密码生成
- **多种格式**: 支持 .zip、.7z 和 tar.gz 格式
- **批量操作**: 一次压缩和解压多个文件

## 系统要求

- Python 3.12
- Dify 平台访问权限
- 所需的 Python 包（通过 requirements.txt 安装）:
  - dify_plugin>=0.2.0
  - pyzipper==0.3.6
  - py7zr==0.20.8

## 安装与配置

1. 安装所需的依赖项：
   ```bash
   pip install -r requirements.txt
   ```

2. 按照标准插件安装流程在您的 Dify 环境中安装插件

## 使用方法

插件提供以下文件压缩和解压工具：

### 普通压缩工具

#### 1. 压缩文件 (compress_normal)
将多个文件压缩为单个归档文件，无需密码保护。
- **参数**:
  - `files`: 要压缩的文件（必需）
  - `archive_name`: 归档文件名（必需，默认：archive）
  - `format`: 压缩格式（必需，默认：zip）
    - `zip`: 使用 LZMA 压缩的 ZIP 格式
    - `7z`: 7z 格式
    - `tar.gz`: 使用 gzip 压缩的 tarball
- **功能特性**:
  - 批量文件压缩
  - 自定义归档命名
  - 多种格式支持
  - 高压缩率

#### 2. 解压文件 (decompress_normal)
从归档文件中提取文件，无需密码保护。
- **参数**:
  - `archive_file`: 要提取的归档文件（必需）
- **功能特性**:
  - 自动文件类型识别
  - 批量文件提取
  - 保留文件结构
  - MIME 类型保留
  - 支持多种格式

### 加密压缩工具

#### 3. 带密码压缩 (compress_encrypt)
使用 AES-256 加密将多个文件压缩为密码保护的归档文件。
- **参数**:
  - `files`: 要压缩的文件（必需）
  - `archive_name`: 归档文件名（必需，默认：secure）
  - `format`: 压缩格式（必需，默认：zip）
    - `zip`: 使用 AES-256 加密的 ZIP 格式
    - `7z`: 使用 AES-256 加密的 7z 格式
  - `password`: 加密密码（必需）
- **功能特性**:
  - AES-256 加密
  - 自定义密码输入
  - 安全的密码处理
  - 批量文件压缩
  - 多种格式支持

#### 4. 带密码解压 (decompress_encrypt)
使用 AES-256 解密从密码保护的归档文件中提取文件。
- **参数**:
  - `archive_file`: 要提取的加密归档文件（必需）
  - `password`: 解密密码（必需）
- **功能特性**:
  - AES-256 解密
  - 密码验证
  - 自动文件类型识别
  - 批量文件提取
  - 错误密码的错误处理

### 自动密码加密工具

#### 5. 自动密码压缩 (compress_encrypt_auto)
使用自动生成的强密码将多个文件压缩为密码保护的归档文件。
- **参数**:
  - `files`: 要压缩的文件（必需）
  - `archive_name`: 归档文件名（必需，默认：secure）
  - `format`: 压缩格式（必需，默认：zip）
    - `zip`: 使用 AES-256 加密的 ZIP 格式
    - `7z`: 使用 AES-256 加密的 7z 格式
- **功能特性**:
  - 自动生成的 16 位强密码
  - 密码包含字母、数字和特殊字符
  - 在文本输出中突出显示密码
  - 密码包含在 JSON 响应中
  - AES-256 加密
  - 密码学安全的密码生成
  - 批量文件压缩

## 文件类型识别

插件自动识别并保留 100+ 种文件格式的 MIME 类型，包括：

- **文档**: .pdf, .doc, .docx, .xls, .xlsx, .ppt, .pptx, .odt, .ods, .odp, .rtf, .txt, .csv
- **图片**: .jpg, .jpeg, .png, .gif, .bmp, .webp, .svg, .tiff, .ico, .psd, .ai
- **音频**: .mp3, .wav, .ogg, .flac, .m4a, .wma
- **视频**: .mp4, .avi, .mkv, .mov, .wmv, .webm, .flv
- **归档**: .zip, .7z, .rar, .tar, .gz
- **代码**: .py, .js, .html, .css, .java, .c, .cpp, .go, .rs, .php, .rb, .sh, .bat
- **以及更多...**

## 注意事项

- 所有压缩和解压都在本地执行，无需将文件上传到外部服务
- 插件对 .zip 文件使用 LZMA 压缩以实现最佳压缩率
- 密码保护的归档使用 AES-256 加密
- 自动生成的密码长度为 16 位，包含字母、数字和特殊字符
- 对于自动密码加密，密码会在文本和 JSON 输出中突出显示
- 解压期间自动识别并保留文件类型
- 大文件可能需要更长的处理时间，具体取决于文件的大小和复杂度
- 压缩率取决于输入文件的类型和内容
- 密码仅在压缩/解压期间使用，不会被存储

## 开发者信息

- **作者**: `https://github.com/sawyer-shi`
- **邮箱**: sawyer36@foxmail.com
- **许可证**: Apache License 2.0
- **源代码**: `https://github.com/sawyer-shi/dify-plugins-file_archive_kit`
- **支持**: 通过 Dify 平台和 GitHub Issues 提供

## 许可证声明

本项目采用 Apache License 2.0 许可证。完整的许可证文本请参阅 [LICENSE](LICENSE) 文件。

---

**准备好安全地压缩和解压您的文件了吗？**
